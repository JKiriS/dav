<div class="svgdiv">
</div>
<script type="text/javascript" src="./d3.min.js"></script>
<script type="text/javascript">
	var w = 600;
	var h = 250;
	var barPadding = 1;
	var svg = d3.select(".svgdiv").append("svg").attr("width",w).attr("height",h);
	d3.json("http://127.0.0.1:8000/rs/getuprejson", function(error, res) {
		console.log(res);
		dataset = res.source;
		var xScale = d3.scale.ordinal()
						.domain( d3.range(dataset.length) )
						.rangeRoundBands( [0,w], 0.05 );
		var yScale = d3.scale.linear()
						.domain( [0, d3.max(dataset)] )
						.range( [0, h] );
		var groups = svg.selectAll("g")
			.data(res.source)
			.enter()
			.append("g");

		var rects = groups.data(dataset)
			.append("rect");
		
		rects.attr({
				"x": function(d,i){ return xScale(i); },
				"y": function(d){ return h-yScale(d.count); },
				"height": function(d){ return yScale(d.count); },
				"width": xScale.rangeBand()
			});
			
		var texts = groups.data(dataset)
			.append("text");
		texts.text( function(d){ return d.name; } )
			.attr({
				x: function(d,i){ return xScale(i)+6; },
				y: function(d){ return h-yScale(d.count)+11; },
				"fill": "red",
				"font-size": "11px",
				"font-family": "sans-serif"
			});
	});
</script>