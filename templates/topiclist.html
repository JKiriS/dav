<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>话题列表</title>

    <!-- jQuery -->
    <script type="text/javascript" src="{{STATIC_URL}}js/jquery-1.11.1.min.js"></script>

    <!-- markdown editor
    <script type="text/javascript" src="{{STATIC_URL}}js/marked.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/editor.js"></script>
    <link rel="stylesheet" href="{{STATIC_URL}}css/editor.css" />-->

    <!-- Bootstrap -->
    <link href="{{STATIC_URL}}css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="{{STATIC_URL}}js/bootstrap.min.js"></script>
    <!-- csrf -->
    <script type="text/javascript" src="{{STATIC_URL}}js/csrf.js"></script>
    <!-- self -->
    <link href="{{STATIC_URL}}css/topicmsg.css" rel="stylesheet">
    <!--<script type="text/javascript" src='{{STATIC_URL}}js/topicmsg.js' ></script>-->
</head>
<body>
    <button type="button" class="btn btn-primary" id="createtopic">创建话题</button>
</body>
<script type="text/javascript">
$(document).ready(function(){
    $("#createtopic").on("click", function(){
        $.post("/topicmsg/newtopicmodal", function(res){
            if(!res.errors){
                $("body").append(res.data);
                $("#newtopicmodal").modal("show");
            }
            else
                alert(res.errors);
        });
    });
    $("body").on("submit", "#newtopicmodal form", function(){
        var title = $("#newtopic-title input").val();
        $.post("/topicmsg/createtopic", {"title":title}, function(res){
            if(!res.errors){
                $("#newtopicmodal").modal("hide");
                window.open(res.params.redirecturl);
            }
            else
                alert(res.errors);
        });
        return false;
    });
});
</script>
</html>